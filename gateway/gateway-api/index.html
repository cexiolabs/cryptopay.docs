


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../images/favicon.jpg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
      
        <title>REST API - CryptoPay Service API (v2.alpha)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4dd2dd8d.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.6a5ad368.min.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/font-awesome.min.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="darkblue" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#payment-gateway-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="CryptoPay Service API (v2.alpha)" class="md-header-nav__button md-logo" aria-label="CryptoPay Service API (v2.alpha)">
      
  <img src="../../images/logo.jpg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            CryptoPay Service API (v2.alpha)
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              REST API
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CryptoPay Service API (v2.alpha)" class="md-nav__button md-logo" aria-label="CryptoPay Service API (v2.alpha)">
      
  <img src="../../images/logo.jpg" alt="logo">

    </a>
    CryptoPay Service API (v2.alpha)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Release Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release-notes/" title="History" class="md-nav__link">
      History
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../releases/2.0/" title="2.0" class="md-nav__link">
      2.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../terminology/" title="Terminology" class="md-nav__link">
      Terminology
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api/" title="REST API" class="md-nav__link">
      REST API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Callbacks
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Callbacks" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Callbacks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../callbacks/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../callbacks-webhooks/" title="Webhooks" class="md-nav__link">
      Webhooks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../support-notes/" title="Support Notes" class="md-nav__link">
      Support Notes
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Payment gateway
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Payment gateway" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Payment gateway
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gateway-overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        REST API
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="REST API" class="md-nav__link md-nav__link--active">
      REST API
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#responses" class="md-nav__link">
    Responses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    Types
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dates" class="md-nav__link">
    Dates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decimal-financial" class="md-nav__link">
    Decimal (Financial)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer" class="md-nav__link">
    Integer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limit" class="md-nav__link">
    Rate Limit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-request" class="md-nav__link">
    Creating a Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signing-a-message" class="md-nav__link">
    Signing a Message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selecting-a-timestamp" class="md-nav__link">
    Selecting a Timestamp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#order" class="md-nav__link">
    /order
  </a>
  
    <nav class="md-nav" aria-label="/order">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-order" class="md-nav__link">
    Get order
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-order" class="md-nav__link">
    Create order
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confirm-order" class="md-nav__link">
    Confirm order
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav" aria-label="Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subscription" class="md-nav__link">
    Subscription
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-structure" class="md-nav__link">
    Callback structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gateway-widget/" title="Widget" class="md-nav__link">
      Widget
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gateway-management/" title="Management" class="md-nav__link">
      Management
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Test Cases
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Test Cases" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Test Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../testcases/001-cryptosell-sunshine/" title="001" class="md-nav__link">
      001
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testcases/002-cryptosell-sunshine-little-overpaid/" title="002" class="md-nav__link">
      002
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testcases/003-cryptosell-sunshine-little-underpaid/" title="003" class="md-nav__link">
      003
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testcases/004-cryptosell-overpaid/" title="004" class="md-nav__link">
      004
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testcases/005-cryptosell-underpaid/" title="005" class="md-nav__link">
      005
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testcases/006-cryptobuy-sunshine/" title="006" class="md-nav__link">
      006
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Change Log" class="md-nav__link">
      Change Log
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#responses" class="md-nav__link">
    Responses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    Types
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dates" class="md-nav__link">
    Dates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decimal-financial" class="md-nav__link">
    Decimal (Financial)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer" class="md-nav__link">
    Integer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limit" class="md-nav__link">
    Rate Limit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-request" class="md-nav__link">
    Creating a Request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signing-a-message" class="md-nav__link">
    Signing a Message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selecting-a-timestamp" class="md-nav__link">
    Selecting a Timestamp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#order" class="md-nav__link">
    /order
  </a>
  
    <nav class="md-nav" aria-label="/order">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-order" class="md-nav__link">
    Get order
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-order" class="md-nav__link">
    Create order
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confirm-order" class="md-nav__link">
    Confirm order
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav" aria-label="Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subscription" class="md-nav__link">
    Subscription
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback-structure" class="md-nav__link">
    Callback structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="payment-gateway-api">Payment Gateway Api</h1>
<p>Payment Gateway API provides an interface for integration with selling points. Using Payment Gateway orders can be created and order status can be checked.</p>
<h2 id="basics">Basics</h2>
<ul>
<li>Data is returned in ascending order. Oldest first, newest last.</li>
<li>All time and timestamp related fields are in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>.</li>
<li>For GET endpoints, parameters must be sent as a <a href="https://en.wikipedia.org/wiki/Query_string">query string</a>.</li>
<li>For POST, PUT, and DELETE endpoints, the parameters are sent in the request body with content type <code>application/json</code>.</li>
<li>Success request codes: 2XX</li>
<li>Client's mistakes: 4XX</li>
<li>Server's errors: 5XX</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Almost POST requests are idempotent. Any duplicate request will be completed with response 
of the first request within 24 hours from the first request. This behaviour in conclusion
with client identifier prevents potential order duplicates.</p>
</div>
<h3 id="responses">Responses</h3>
<p>Our API uses <a href="http://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml">HTTP status codes</a> to indicate the status of your requests. This includes successful and unsuccessful responses.</p>
<ul>
<li>2xx (Successful): The request was successfully received, understood, and accepted</li>
<li>4xx (Client Error): The request contains bad syntax or cannot be fulfilled</li>
<li>5xx (Server Error): The server failed to fulfill an apparently valid request</li>
</ul>
<div class="admonition note">
<p class="admonition-title">5xx</p>
<p>It is important to NOT treat this as a failure operation. The execution status is UNKNOWN and could have been a success.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Error Reason Phrase</p>
<p>An unsuccessful response DOES NOT HAVE body. Error message passed via <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html">Reason Phrase</a> along with Status Code and <strong>CP-REASON-PHRASE</strong> header</p>
</div>
<table>
<thead>
<tr>
<th><strong>Status Code</strong></th>
<th><strong>Meaning</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>Standard response for successful HTTP requests</td>
</tr>
<tr>
<td>201 Created</td>
<td>The request has been fulfilled, resulting in the creation of a new resource</td>
</tr>
<tr>
<td>202 Accepted</td>
<td>The request has been accepted for processing, but the processing has not been completed</td>
</tr>
<tr>
<td>400 {{Reason Phrase}}</td>
<td>The server cannot or will not process the request due to an apparent client error (e.g., malformed request syntax, size too large, invalid request message framing, or deceptive request routing)</td>
</tr>
<tr>
<td>401 {{Reason Phrase}}</td>
<td>Most likely you wasn't able to construct and sign your API request correctly using HMAC</td>
</tr>
<tr>
<td>403 {{Reason Phrase}}</td>
<td>You don't have required permissions to perform requested action on the resource</td>
</tr>
<tr>
<td>404 {{Reason Phrase}}</td>
<td>We don't have the resource you've requested</td>
</tr>
<tr>
<td>409 {{Reason Phrase}}</td>
<td>Most likely the client's identifier value you're trying to use had been used before</td>
</tr>
<tr>
<td>422 {{Reason Phrase}}</td>
<td>The request was well-formed but was unable to be followed due to semantic errors</td>
</tr>
<tr>
<td>500 {{Reason Phrase}}</td>
<td>We have a problem with our server</td>
</tr>
<tr>
<td>503 Service Unavailable</td>
<td>We're temporarily offline for maintenance</td>
</tr>
</tbody>
</table>
<h3 id="types">Types</h3>
<h4 id="dates">Dates</h4>
<p>All timestamps from API are returned in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> with milliseconds. Make sure you can parse the following ISO 8601 format. Most modern languages and libraries will handle this without issues.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="s2">&quot;2020-01-16T07:35:32.129Z&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="decimal-financial">Decimal (Financial)</h4>
<p>All numbers that represent financial values are returned as strings to preserve full precision across platforms. When making a request, you must convert your numbers to strings to avoid truncation and precision errors.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="s2">&quot;12345678.12345678&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h4 id="integer">Integer</h4>
<p>Integer numbers (like counter) are unquoted.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;confirmations&quot;</span><span class="p">:</span><span class="mi">5</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="rate-limit">Rate Limit</h3>
<p>When a rate limit is exceeded, a status of <strong>429 Too Many Requests</strong> will be returned.</p>
<p>TBD: what is limit?</p>
<h2 id="authentication">Authentication</h2>
<p>Before being able to send any requests to API you need to create <a href="/gateway/gateway-management/#create">Paymen Gateway instance</a>.
Creation will result in three pieces of information which will be used for authentication:</p>
<ul>
<li><code>GatewayId</code> - Unique identificator of gateway instance.</li>
<li><code>Secret</code> - Randomly generated secret, used for data integrity validation and authentication.</li>
<li><code>Passphrase</code> - Provided by you to further secure your API access, used for authentication. </li>
</ul>
<h3 id="creating-a-request">Creating a Request</h3>
<p>Private REST requests must contain the following headers:</p>
<ul>
<li><strong>CP-ACCESS-SIGN</strong> The base64-encoded signature (see <a href="#signing-a-message">Signing a Message</a>).</li>
<li><strong>CP-ACCESS-TIMESTAMP</strong> A timestamp for your request.</li>
<li><strong>CP-ACCESS-PASSPHRASE</strong> The passphrase generated while Payment Gateway creation.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on required security level you can disable signature authorization for particular Payment Gateway. In this case authentication will be performed 
<strong>only</strong> using Passphrase. It can be configured while Payment Gateway creation over setting 
<a href="/gateway/gateway-management/#create">Allow unsigned requests</a> option.</p>
</div>
<p>All request bodies should have content type <strong>application/json</strong> and be valid JSON.</p>
<h3 id="signing-a-message">Signing a Message</h3>
<p>The <strong>CP-ACCESS-SIGN</strong> header is generated by creating a sha256 HMAC using the base64-decoded secret key on the prehash string <strong>timestamp</strong> + <strong>method</strong> + <strong>requestPath</strong> + <strong>body</strong> (where + represents string concatenation) and base64-encode the output. The timestamp value is the same as the <strong>CP-ACCESS-TIMESTAMP</strong> header.</p>
<p>The <strong>body</strong> is the request body string or omitted if there is no request body (typically for GET requests).</p>
<p>The <strong>method</strong> should be UPPER CASE like "GET", "POST", etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not forget to base64-decode the alphanumeric secret string (resulting in 64 bytes) before using it as the key for HMAC. Also, base64-encode the digest output before sending in the header.</p>
</div>
<div class="tabbed-set" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Bash</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nv">SECRET</span><span class="o">=</span><span class="s2">&quot;cNmgFLOwbckPszgJdUe4rdpcUo2IBHtNPsyxAScjl7CN4omMN64UJAvODT8PsrPIfR7TosKUfEFROyhz/YJxsw==&quot;</span>
<span class="c1">#TIMESTAMP=$(date +%s)</span>
<span class="nv">TIMESTAMP</span><span class="o">=</span><span class="m">1573753848</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span>
<span class="nv">URLPATH</span><span class="o">=</span><span class="s2">&quot;/v2/order?something=42&quot;</span>
<span class="nv">BODY</span><span class="o">=</span><span class="s1">&#39;{&quot;clientOrderId&quot;:&quot;1490548887804-XA-1112-TU&quot;,&quot;clientOrderTag&quot;:&quot;Any merchant data&quot;,&quot;instrument&quot;:&quot;CRYPTO_SELL&quot;,&quot;feeModel&quot;:&quot;INCLUDED&quot;,&quot;from&quot;:{&quot;currency&quot;:&quot;BTC&quot;},&quot;to&quot;:{&quot;currency&quot;:&quot;USD&quot;,&quot;amount&quot;:&quot;150.42&quot;}}&#39;</span>

<span class="nv">WHAT</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TIMESTAMP</span><span class="si">}${</span><span class="nv">METHOD</span><span class="si">}${</span><span class="nv">URLPATH</span><span class="si">}${</span><span class="nv">BODY</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nv">SECRET_KEY</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> -n <span class="s2">&quot;</span><span class="si">${</span><span class="nv">SECRET</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">|</span> base64 --decode <span class="p">|</span> hexdump -v -e <span class="s1">&#39;/1 &quot;%02x&quot;&#39;</span><span class="k">)</span>

<span class="nb">echo</span> -n <span class="s2">&quot;</span><span class="si">${</span><span class="nv">WHAT</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">|</span> openssl dgst -sha256 -mac HMAC -macopt <span class="s2">&quot;hexkey:</span><span class="nv">$SECRET_KEY</span><span class="s2">&quot;</span> <span class="p">|</span> xxd -r -p <span class="p">|</span> base64
<span class="c1"># Expected: 00O36QWCSc9/rmtxiqCnPQiHXr5xaXlZIf2nkdm9PUk=</span>
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">JavaScript</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="s2">&quot;cNmgFLOwbckPszgJdUe4rdpcUo2IBHtNPsyxAScjl7CN4omMN64UJAvODT8PsrPIfR7TosKUfEFROyhz/YJxsw==&quot;</span><span class="p">;</span>
<span class="c1">//const timestamp = Date.now() / 1000;</span>
<span class="kr">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="mi">1573753848</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">urlPath</span> <span class="o">=</span> <span class="s2">&quot;/v2/order?something=42&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="s1">&#39;{&quot;clientOrderId&quot;:&quot;1490548887804-XA-1112-TU&quot;,&quot;clientOrderTag&quot;:&quot;Any merchant data&quot;,&quot;instrument&quot;:&quot;CRYPTO_SELL&quot;,&quot;feeModel&quot;:&quot;INCLUDED&quot;,&quot;from&quot;:{&quot;currency&quot;:&quot;BTC&quot;},&quot;to&quot;:{&quot;currency&quot;:&quot;USD&quot;,&quot;amount&quot;:&quot;150.42&quot;}}&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">what</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">method</span> <span class="o">+</span> <span class="nx">urlPath</span> <span class="o">+</span> <span class="nx">body</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">secretKey</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">secret</span><span class="p">,</span> <span class="s2">&quot;base64&quot;</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">hmac</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;crypto&quot;</span><span class="p">).</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">&quot;sha256&quot;</span><span class="p">,</span> <span class="nx">secretKey</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hmac</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">what</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&quot;base64&quot;</span><span class="p">));</span>
<span class="c1">// Expected: 00O36QWCSc9/rmtxiqCnPQiHXr5xaXlZIf2nkdm9PUk=</span>
</code></pre></div>

</div>
<input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><label for="__tabbed_1_3">PHP</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>
<span class="nv">$secret</span> <span class="o">=</span> <span class="s2">&quot;cNmgFLOwbckPszgJdUe4rdpcUo2IBHtNPsyxAScjl7CN4omMN64UJAvODT8PsrPIfR7TosKUfEFROyhz/YJxsw==&quot;</span><span class="p">;</span>
<span class="c1">#$timestamp = time()</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="mi">1573753848</span><span class="p">;</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span><span class="p">;</span>
<span class="nv">$urlPath</span> <span class="o">=</span> <span class="s2">&quot;/v2/order?something=42&quot;</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="s1">&#39;{&quot;clientOrderId&quot;:&quot;1490548887804-XA-1112-TU&quot;,&quot;clientOrderTag&quot;:&quot;Any merchant data&quot;,&quot;instrument&quot;:&quot;CRYPTO_SELL&quot;,&quot;feeModel&quot;:&quot;INCLUDED&quot;,&quot;from&quot;:{&quot;currency&quot;:&quot;BTC&quot;},&quot;to&quot;:{&quot;currency&quot;:&quot;USD&quot;,&quot;amount&quot;:&quot;150.42&quot;}}&#39;</span><span class="p">;</span>

<span class="nv">$what</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="o">.</span> <span class="nv">$method</span> <span class="o">.</span> <span class="nv">$urlPath</span> <span class="o">.</span> <span class="nv">$body</span><span class="p">;</span>

<span class="nv">$secretKey</span> <span class="o">=</span> <span class="nb">base64_decode</span><span class="p">(</span><span class="nv">$secret</span><span class="p">);</span>

<span class="k">print</span><span class="p">(</span><span class="nb">base64_encode</span><span class="p">(</span><span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">&quot;sha256&quot;</span><span class="p">,</span> <span class="nv">$what</span><span class="p">,</span> <span class="nv">$secretKey</span><span class="p">,</span> <span class="k">true</span><span class="p">)));</span>
<span class="c1"># Expected: 00O36QWCSc9/rmtxiqCnPQiHXr5xaXlZIf2nkdm9PUk=</span>
</code></pre></div>

</div>
<input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><label for="__tabbed_1_4">Java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1">// file: SignatureCalculator.java</span>
<span class="kn">package</span> <span class="nn">band.cryptopay</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.nio.charset.Charset</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.security.InvalidKeyException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.security.NoSuchAlgorithmException</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.codec.binary.Base64</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.lang3.ArrayUtils</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SignatureCalculator</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">_secret</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">SignatureCalculator</span><span class="p">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">secretBase64</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="na">_secret</span> <span class="o">=</span> <span class="n">Base64</span><span class="p">.</span><span class="na">decodeBase64</span><span class="p">(</span><span class="n">secretBase64</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sing</span><span class="p">(</span><span class="n">String</span> <span class="n">timeStampStr</span><span class="p">,</span> <span class="n">String</span> <span class="n">httpMethod</span><span class="p">,</span> <span class="n">String</span> <span class="n">urlPath</span><span class="p">)</span>
            <span class="kd">throws</span> <span class="n">InvalidKeyException</span><span class="p">,</span> <span class="n">NoSuchAlgorithmException</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">sing</span><span class="p">(</span><span class="n">timeStampStr</span><span class="p">,</span> <span class="n">httpMethod</span><span class="p">,</span> <span class="n">urlPath</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sing</span><span class="p">(</span><span class="n">String</span> <span class="n">timeStampStr</span><span class="p">,</span> <span class="n">String</span> <span class="n">httpMethod</span><span class="p">,</span> <span class="n">String</span> <span class="n">urlPath</span><span class="p">,</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bodyRaw</span><span class="p">)</span>
            <span class="kd">throws</span> <span class="n">InvalidKeyException</span><span class="p">,</span> <span class="n">NoSuchAlgorithmException</span> <span class="p">{</span>

        <span class="kd">final</span> <span class="n">String</span> <span class="n">prefixStr</span> <span class="o">=</span> <span class="n">timeStampStr</span> <span class="o">+</span> <span class="n">httpMethod</span> <span class="o">+</span> <span class="n">urlPath</span><span class="p">;</span>
        <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">prefixRaw</span> <span class="o">=</span> <span class="n">prefixStr</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">Charset</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;UTF-8&quot;</span><span class="p">));</span>

        <span class="kd">final</span> <span class="n">String</span> <span class="n">algo</span> <span class="o">=</span> <span class="s">&quot;HmacSHA256&quot;</span><span class="p">;</span>
        <span class="kd">final</span> <span class="n">Mac</span> <span class="n">sha256_HMAC</span> <span class="o">=</span> <span class="n">Mac</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">algo</span><span class="p">);</span>
        <span class="n">sha256_HMAC</span><span class="p">.</span><span class="na">init</span><span class="p">(</span><span class="k">new</span> <span class="n">SecretKeySpec</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">_secret</span><span class="p">,</span> <span class="n">algo</span><span class="p">));</span>

        <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">what</span> <span class="o">=</span> <span class="n">bodyRaw</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">ArrayUtils</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">prefixRaw</span><span class="p">,</span> <span class="n">bodyRaw</span><span class="p">)</span> <span class="p">:</span> <span class="n">prefixRaw</span><span class="p">;</span>

        <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">sha256_HMAC</span><span class="p">.</span><span class="na">doFinal</span><span class="p">(</span><span class="n">what</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">Base64</span><span class="p">.</span><span class="na">encodeBase64String</span><span class="p">(</span><span class="n">signature</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Make signature</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">secretBase64</span> <span class="o">=</span> <span class="s">&quot;cNmgFLOwbckPszgJdUe4rdpcUo2IBHtNPsyxAScjl7CN4omMN64UJAvODT8PsrPIfR7TosKUfEFROyhz/YJxsw==&quot;</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">timeStampStr</span> <span class="o">=</span> <span class="s">&quot;1573753848&quot;</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">httpMethod</span> <span class="o">=</span> <span class="s">&quot;POST&quot;</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">urlPath</span> <span class="o">=</span> <span class="s">&quot;/v2/order?something=42&quot;</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">bodyStr</span> <span class="o">=</span> <span class="s">&quot;{\&quot;clientOrderId\&quot;:\&quot;1490548887804-XA-1112-TU\&quot;,\&quot;clientOrderTag\&quot;:\&quot;Any merchant data\&quot;,\&quot;instrument\&quot;:\&quot;CRYPTO_SELL\&quot;,\&quot;feeModel\&quot;:\&quot;INCLUDED\&quot;,\&quot;from\&quot;:{\&quot;currency\&quot;:\&quot;BTC\&quot;},\&quot;to\&quot;:{\&quot;currency\&quot;:\&quot;USD\&quot;,\&quot;amount\&quot;:\&quot;150.42\&quot;}}&quot;</span><span class="p">;</span>
<span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">body</span> <span class="o">=</span> <span class="n">bodyStr</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">Charset</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;UTF-8&quot;</span><span class="p">));</span>

<span class="kd">final</span> <span class="n">SignatureCalculator</span> <span class="n">signatureCalculator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SignatureCalculator</span><span class="p">(</span><span class="n">secretBase64</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">signatureCalculator</span><span class="p">.</span><span class="na">sing</span><span class="p">(</span><span class="n">timeStampStr</span><span class="p">,</span> <span class="n">httpMethod</span><span class="p">,</span> <span class="n">urlPath</span><span class="p">,</span> <span class="n">body</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">signature</span><span class="p">);</span>
<span class="c1">// Expected: 00O36QWCSc9/rmtxiqCnPQiHXr5xaXlZIf2nkdm9PUk=</span>
</code></pre></div>

</div>
</div>
<h3 id="selecting-a-timestamp">Selecting a Timestamp</h3>
<p>The <strong>CP-ACCESS-TIMESTAMP</strong> header MUST be number of seconds since Unix Epoch in UTC. Decimal values are allowed.</p>
<div class="highlight"><pre><span></span><code>CP-ACCESS-TIMESTAMP: 1579161402.051
</code></pre></div>

<h2 id="order">/order</h2>
<h3 id="get-order">Get order</h3>
<p>Retrive order by orderId.</p>
<div class="highlight"><pre><span></span><code>GET /v2/gate/{{gatewayId}}/order/{{orderId}}
</code></pre></div>

<p><strong>Permission:</strong> Public</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Mandatory</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>gatewayId</strong></td>
<td>IDENTIFIER</td>
<td>YES</td>
<td>Gateway identifier, like "ee299e8d-d41f-45ae-b67b-f1d917f28014"</td>
</tr>
<tr>
<td><strong>orderId</strong></td>
<td>IDENTIFIER</td>
<td>YES</td>
<td>Order identifier, string</td>
</tr>
</tbody>
</table>
<p><strong>Response body</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;shopping_order_11804&quot;</span><span class="p">,</span>
    <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-22T18:54:30.651Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-22T18:54:30.651Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confirmedAt&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;iWatch6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;okRedirect&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;failRedirect&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;emailSpecified&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;expiredAt&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;instrument&quot;</span><span class="p">:</span> <span class="s2">&quot;CRYPTO_SELL&quot;</span><span class="p">,</span>
    <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;DEFAULT&quot;</span><span class="p">,</span>
    <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;REQUESTED&quot;</span><span class="p">,</span>
    <span class="nt">&quot;rejectionReason&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;paidStatus&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;529&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;deposit&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;depositAcceptConfirmations&quot;</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="create-order">Create order</h3>
<p>Create new order.</p>
<div class="highlight"><pre><span></span><code>POST /v2/gate/{{gatewayId}}/order
</code></pre></div>

<p><strong>Permission:</strong> Private - authentication required.</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Mandatory</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>gatewayId</strong></td>
<td>IDENTIFIER</td>
<td>YES</td>
<td>Gateway identifier, like "ee299e8d-d41f-45ae-b67b-f1d917f28014"</td>
</tr>
</tbody>
</table>
<p><strong>Request body:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Any string that uniquely identifies order&quot;</span><span class="p">,</span>
    <span class="nt">&quot;instrument&quot;</span><span class="p">:</span> <span class="s2">&quot;CRYPTO_SELL&quot;</span><span class="p">,</span>
    <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;DEFAULT&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;i_am_client@mymail.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Any data realted to order&quot;</span><span class="p">,</span>
    <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;529&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response body:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;shopping_order_11805&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="confirm-order">Confirm order</h3>
<p>Confirm created order.</p>
<div class="highlight"><pre><span></span><code>POST /v2/gate/{{gatewayId}}/order/confirm
</code></pre></div>

<p><strong>Permission:</strong> Private - authentication required.</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Mandatory</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>gatewayId</strong></td>
<td>IDENTIFIER</td>
<td>YES</td>
<td>Gateway identifier, like "ee299e8d-d41f-45ae-b67b-f1d917f28014"</td>
</tr>
</tbody>
</table>
<p><strong>Request body:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;Order id to confirm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;i_am_client@mymail.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;BTC&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;529&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Response body:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;shopping_order_11805&quot;</span><span class="p">,</span>
    <span class="nt">&quot;createdAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-22T19:25:42.102Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;updatedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-22T19:25:56.713Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confirmedAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-22T19:25:56.713Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;iWatch6&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;okRedirect&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;failRedirect&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;emailSpecified&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;instrument&quot;</span><span class="p">:</span> <span class="s2">&quot;CRYPTO_SELL&quot;</span><span class="p">,</span>
    <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;DEFAULT&quot;</span><span class="p">,</span>
    <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;AWAIT_DEPOSIT&quot;</span><span class="p">,</span>
    <span class="nt">&quot;rejectionReason&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;paidStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;NONE&quot;</span><span class="p">,</span>
    <span class="nt">&quot;expiredAt&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-09-22T19:40:56.713Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;symbol&quot;</span><span class="p">:</span> <span class="s2">&quot;ETH/USD&quot;</span><span class="p">,</span>
        <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="s2">&quot;341.63&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;accountId&quot;</span><span class="p">:</span> <span class="s2">&quot;CPA-7f341bfabe284cef9d92beccc97eca5b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;ETH&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;1.54845886&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;accountId&quot;</span><span class="p">:</span> <span class="s2">&quot;CPA-023b6b73608247578cf7ee57aad56525&quot;</span><span class="p">,</span>
        <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;529&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;deposit&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;address&quot;</span><span class="p">:</span> <span class="s2">&quot;0x01472ba7396d1cc22e7e0cbe735ad2dbec499943&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;ethereum:0x01472ba7396d1cc22e7e0cbe735ad2dbec499943?value=1.54845886&quot;</span><span class="p">,</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
        <span class="nt">&quot;underpayment&quot;</span><span class="p">:</span> <span class="s2">&quot;1.54845886&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;depositAcceptConfirmations&quot;</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="callbacks">Callbacks</h2>
<p>Because of blockchin nature we can't be totally sure that payment completed successfully exactly after client made it. 
It is required to wait some time after transaction to treat it as trusted and complete the order. Time period depends on blockchin type. </p>
<p>We can notify you about order status changes over callback mechanism. Callback is HTTP request which we will make to your side for every status change 
of every order.</p>
<h3 id="subscription">Subscription</h3>
<p>You can subscribe on callbacks while Paymen Gateway instance creation, using <a href="/gateway/gateway-management/#create">Callback</a> configuration.
Or you can reconfigure it lately.</p>
<h3 id="callback-structure">Callback structure</h3>
<p>Callback body has the same content as response of <a href="/gateway/gateway-api/#get-order">Get order</a>.</p>
<p>Your service should respond with successfull status (2xx) when callback is accepted. Otherwise, we will retry delivery
according to <a href="/callbacks/#delivery">Delivery strategy</a> until successfull response.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../gateway-overview/" title="Overview" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </div>
            </div>
          </a>
        
        
          <a href="../gateway-widget/" title="Widget" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Widget
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/mermaid.min.js"></script>
      
    
  </body>
</html>